
<html>
<head>
<title>登录</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
	 <script>
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }
    </script>
		<style>
			input{
				border:none;
				background:none;
				outline:none;
			}
	</style>
	<!-- Custom Theme files -->
	<link href="/static/login/css/style.css" rel="stylesheet" type="text/css" media="all" />
	<link href="/static/login/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all" />
	<!-- //Custom Theme files -->
</head>
<body>


<div class="w3layouts-main"> 
	<div class="bg-layer">
		<h1>|Slide Login|</h1>
		<div class="header-main">
			<div class="main-icon">
				<span class="fa fa-eercast"></span>
			</div>
			<div class="header-left-bottom">
				<form id="myForm">
					<div class="icon1">
						<span class="fa fa-user"></span>
						<input name="username" placeholder="用户名" required=""/>
					</div>
					<div class="icon1">
						<span class="fa fa-lock"></span>
						<input type="password" name="password" placeholder="密码" required=""/>
					</div>
					
					<div class="bottom">
						<button class="btn">Log In</button>
					</div>

				</form>

                <script>
                    //
                    $('#myForm').submit(function(event) {
                      // 阻止默认的表单提交行为
                      event.preventDefault();

                      // 获取表单数据
                      var formData = $(this).serialize();

                      // 使用$.ajax()方法提交表单数据
                      $.ajax({
                        url: "{% url 'admin_home:login'%}",
                        type: 'POST',
                        data: formData,
                        success: function(response) {
                            if(response.flag==1){
                                window.location.href = "{%url 'admin_home:index'%}";
                            }
                            else{
                                var $alert = $('<div class="alert alert-danger" style="position:absolute;border: 1px solid red; color: red;top:15%;left:46%;z-index: 1">提交失败，请稍后重试！</div>').appendTo('body');
                                    setTimeout(function(){
                                      $alert.remove();
                                    }, 5000);
                            }
                        },
                        error: function(error) {
                          console.log(error);
                        }
                      });
                    });
                </script>
			</div>
			
		</div>
	</div>
</div>
	


</body>
</html>